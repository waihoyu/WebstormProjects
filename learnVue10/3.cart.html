<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>购物车</title>
        <link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.css">
    </head>
    <body>
            <!--栅格化布局  默认12列，（有一些框架可能是24列-->
            <!--常见的样式，  基本样式  + 增强样式-->
            <div id="app">
            <div class="container">
                <!--每一行又会用友12列-->
                <div class="row">
                    <table class="table table-hover table-bordered">
                        <thead>
                        <caption class="h5 text-warning text-center">购物车</caption>
                            <tr>
                                <th>全选 <input type="checkbox"></th>
                                <td>商品</td>
                                <td>单价</td>
                                <td>数量</td>
                                <td>小计</td>
                                <td>操作</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="(product,index) in products">
                                <td><input type="checkbox" v-model="product.isSelected"></td>
                                <td><img :src="product.productCover"/>{{product.productName}}</td>
                                <!--lazy-->
                                <td><input type="number" v-model.number="product.productCount"></td>
                                <td>{{product.productPrice}}</td>
                                <!--过滤器  元数据不改变的情况下-->
                                <td>{{product.productCount * product.productPrice | toFixed}}</td>
                                <td><button class="btn btn-danger" @click="remove(product)">删除</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <script src="./node_modules/vue/dist/vue.js"></script>
        <script src="./node_modules/axios/dist/axios.js"></script>
        <script>
            let vm = new Vue({
                el:'#app',
                //专门用来发送ajax的方法
                created(){
                    //在数据被初始化后会调用，this指向指的是vm实例，钩子函数
                    //Promise  解决回调问题的
                    this.getData()
                },
                methods:{
                    getData(){
                        let that = this
                        axios.get('./carts.json').then(function (res) {
                            that.products = res.data
                        },function (err) { //error
                            console.log(err)
                        })
                    },remove(p){ //p代表当前点击的这一项
                        this.products = this.products.filter(item => item !== p)
                    }
                },
                data:{
                    products:[]
                },
                filters:{
                    toFixed(input,param1){
                        //这里的this指向windows
                        return '￥' + input.toFixed(param1)
                    }
                }
            })
        </script>

    </body>
</html>
